<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" th:href="@{/css/reset.css}">
    <link rel="stylesheet" th:href="@{/css/JobPosting.css}">

    <script src="/bootstrap-3.4.1-dist/js/jquery-3.7.1.min.js"></script>
    <script src="/bootstrap-3.4.1-dist/js/bootstap.js"></script>
    <script src="/bootstrap-3.4.1-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/font/bootstrap-icons.css" />


    <!--    <link rel="stylesheet" href="JobPosting_mobile.css">-->

</head>
<body>

<div th:replace="~{include/header :: headerFragment}"></div>
<div class="forMargin">


    <div class="searchTitle">
        <h2><a href="/jobposting" style="text-decoration: none">ëª¨ì§‘ê³µê³  ë³´ê¸°</a></h2>
    </div>

    <div class="searchCheckBoxRemake"> <!--ê²€ìƒ‰ ì¹´í…Œê³ ë¦¬-->
        <div>
            <div class="searchToggleButton"><button class="searchToggleButtonLegion" tabindex="0">ì§€ì—­ë³„</button></div>
            <div class="searchToggleButton"><button class="searchToggleButtonJobType" tabindex="0">ì§ì¢…ë³„</button></div>
        </div>

        <hr class="legionUnderBar"><hr class="jobTypeUnderBar">

        <form name="jobsearch" action="jobposting" method="get">

            <div class="searchCheckBoxLegion"> <!--ê²€ìƒ‰ ì„¸ë¶€ 3ê°œê¹Œì§€ / ê°€ë¡œ 7 ì„¸ë¡œ 3-->
                <div><input type="checkbox" class="searchCheckLegion" value="ì„œìš¸" name="searchRegion">ì„œìš¸</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ê²½ê¸°" name="searchRegion">ê²½ê¸°</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ì¸ì²œ" name="searchRegion">ì¸ì²œ</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ëŒ€ì „" name="searchRegion">ëŒ€ì „</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ì„¸ì¢…" name="searchRegion">ì„¸ì¢…</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ì¶©ë‚¨" name="searchRegion">ì¶©ë‚¨</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ì¶©ë¶" name="searchRegion">ì¶©ë¶</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ê´‘ì£¼" name="searchRegion">ê´‘ì£¼</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ì „ë‚¨" name="searchRegion">ì „ë‚¨</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ì „ë¶" name="searchRegion">ì „ë¶</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ëŒ€êµ¬" name="searchRegion">ëŒ€êµ¬</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ê²½ë‚¨" name="searchRegion">ê²½ë‚¨</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ê²½ë¶" name="searchRegion">ê²½ë¶</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ë¶€ì‚°" name="searchRegion">ë¶€ì‚°</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ìš¸ì‚°" name="searchRegion">ìš¸ì‚°</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ê°•ì›" name="searchRegion">ê°•ì›</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ì œì£¼" name="searchRegion">ì œì£¼</div>
                <div><input type="checkbox" class="searchCheckLegion" value="ì „êµ­" name="searchRegion">ì „êµ­</div>





            </div>

            <div class="searchCheckBoxJobType"> <!--ê²€ìƒ‰ ì„¸ë¶€ 3ê°œê¹Œì§€ / ê°€ë¡œ 7 ì„¸ë¡œ 3-->
                <div class="searchCheckTopCategoryJobType" id="topCategoryList">


                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="01"><span>ê²½ì˜Â·ì‚¬ë¬´Â·ê¸ˆìœµÂ·ë³´í—˜</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="02"><span>ì—°êµ¬ ë° ê³µí•™ê¸°ìˆ </span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="03"><span>êµìœ¡Â·ë²•ë¥ Â·ì‚¬íšŒë³µì§€Â·ê²½ì°°Â·ì†Œë°© ë° êµ°ì¸</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="04"><span>ë³´ê±´Â·ì˜ë£Œ</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="05"><span>ì˜ˆìˆ Â·ë””ìì¸Â·ë°©ì†¡Â·ìŠ¤í¬ì¸ </span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="06"><span>ë¯¸ìš©Â·ì—¬í–‰Â·ìˆ™ë°•Â·ìŒì‹Â·ê²½ë¹„Â·ëŒë´„Â·ì²­ì†Œ</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="07"><span>ì˜ì—…Â·íŒë§¤Â·ìš´ì „Â·ìš´ì†¡</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="08"><span>ê±´ì„¤Â·ì±„êµ´</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="09"><span>ì„¤ì¹˜Â·ì •ë¹„Â·ìƒì‚°-ê¸°ê³„Â·ê¸ˆì†Â·ì¬ë£Œ</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="10"><span>ì„¤ì¹˜Â·ì •ë¹„Â·ìƒì‚°-ì „ê¸°Â·ì „ìÂ·ì •ë³´í†µì‹ </span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="11"><span>ì„¤ì¹˜Â·ì •ë¹„Â·ìƒì‚°-í™”í•™Â·í™˜ê²½Â·ì„¬ìœ Â·ì˜ë³µÂ·ì‹í’ˆê°€ê³µ</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="12"><span>ì„¤ì¹˜Â·ì •ë¹„Â·ìƒì‚°-ì¸ì‡„Â·ëª©ì¬Â·ê³µì˜ˆ ë° ì œì¡° ë‹¨ìˆœ</span></div>
                    <div><input type="radio" class="topCategoryCheckJobType" name = "topCategory" value="13"><span>ë†ë¦¼ì–´ì—…ì§</span></div>


                </div>
                <div class="searchCheckUnderCategoryJobType" id="underCategoryList">

                    <!--
                    <div><input type="checkbox" class="searchCheckJobType"><span>í–‰ì •Â·ê²½ì˜Â·ê¸ˆìœµÂ·ë³´í—˜ ê´€ë¦¬ì§</span></div>

                    -->

                </div>


            </div>

            <hr>

            <div>
                <div>
                    <div class="searchSubmitButtonBox lastBox">
                        <button type="submit" class="searchSubmitButton">ê²€ìƒ‰</button>
                    </div>
                </div>
            </div>

        </form>


    </div>

    <script>
        var searchToggleButton = document.querySelectorAll('.searchToggleButton');
        var searchToggleButtonLegion = document.querySelector('.searchToggleButtonLegion');
        var searchToggleButtonJobType = document.querySelector('.searchToggleButtonJobType');
        var LegionBox = document.querySelector('.searchCheckBoxLegion');
        var jobTypeBox = document.querySelector('.searchCheckBoxJobType');
        var LegionCheckBox = document.querySelectorAll('.searchCheckLegion');
        var jobTypeCheckBox = document.querySelectorAll('.searchCheckJobType');

        var legionUnderBar = document.querySelector('.legionUnderBar');
        var jobTypeUnderBar = document.querySelector('.jobTypeUnderBar');

        var fakeCheckBoxLegion = document.querySelectorAll('.searchCheckBoxLegion > div')
        var fakeCheckBoxJobType = document.querySelectorAll('.searchCheckUnderCategoryJobType > div')

        var topCategoryCheckJobType = document.querySelectorAll('.topCategoryCheckJobType')
        var searchCheckTopCategoryJobType = document.querySelectorAll('.searchCheckTopCategoryJobType > div')
        var searchCheckUnderCategoryJobType = document.querySelector('.searchCheckUnderCategoryJobType')

        //ì§€ì—­, ì§ì¢… í† ê¸€
        for(var i = 0 ; i < 2; i++) {
            searchToggleButton[i].addEventListener('touchstart', handleToggle);
            searchToggleButton[i].addEventListener('click', handleToggle);

            function handleToggle(event) {
                var toggleButtonName = this.innerText;

                if(toggleButtonName === 'ì§€ì—­ë³„') {
                    LegionBox.style.display = 'flex';
                    searchToggleButtonLegion.style.fontWeight = 'bold';
                    legionUnderBar.style.backgroundColor = '#000'
                    jobTypeBox.style.display = 'none';
                    searchToggleButtonJobType.style.fontWeight = 'normal';
                    jobTypeUnderBar.style.backgroundColor = '#D0D0D0';

                    for(var j = 0; j < topCategoryCheckJobType.length; j++) {
                        topCategoryCheckJobType[j].checked = false;
                    }

                    for(var j = 0; j<jobTypeCheckBox.length; j++ ) {
                        jobTypeCheckBox[j].checked = false;
                        jobTypeCheckBox[j].parentElement.style.borderColor = '#D0D0D0';
                        jobTypeCheckBox[j].parentElement.style.backgroundColor = '#ffffff';
                        jobTypeCheckBox[j].parentElement.style.color = '#000000';

                    }



                } else if(toggleButtonName === 'ì§ì¢…ë³„') {
                    LegionBox.style.display = 'none';
                    searchToggleButtonJobType.style.fontWeight = 'bold';
                    jobTypeUnderBar.style.backgroundColor = '#000'
                    jobTypeBox.style.display = 'flex';
                    searchToggleButtonLegion.style.fontWeight = 'normal';
                    legionUnderBar.style.backgroundColor = '#D0D0D0';

                    // for(var j = 0; j<LegionCheckBox.length; j++) {
                    //     LegionCheckBox[j].checked=false;
                    //     LegionCheckBox[j].parentElement.style.borderColor = '#D0D0D0';
                    //     LegionCheckBox[j].parentElement.style.backgroundColor = '#ffffff';
                    //     LegionCheckBox[j].parentElement.style.color = '#000000';
                    // }



                }

            }
        }

        //ì§€ì—­ë³„ - 3ê°œê¹Œì§€ ì²´í¬
        for (var i = 0; i< 18; i++) {
            (function(index) {
                fakeCheckBoxLegion[index].addEventListener('click', function() {
                    var checkbox = fakeCheckBoxLegion[index].querySelector('.searchCheckLegion')

                    if(checkbox.checked) {
                        checkbox.checked = false;
                        this.style.borderColor = '#D0D0D0'
                        this.style.backgroundColor = '#ffffff'
                        this.style.color = '#000000'

                    } else {
                        var checkedCount = document.querySelectorAll('.searchCheckLegion:checked').length;

                        if(checkedCount > 2) {
                            alert('ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!');
                            this.checked = false; //ë‹¤ì‹œ ì²´í¬í•´ì œ
                            return;
                        }

                        checkbox.checked = true;
                        this.style.borderColor = '#ffffff'
                        this.style.backgroundColor = '#255EEE'
                        this.style.color = '#ffffff'

                        // âœ… hidden input ì¶”ê°€
                        const form = document.forms["jobsearch"];
                        const existingHidden = form.querySelectorAll('input[type="hidden"][name="searchRegion"]');
                        existingHidden.forEach(h => h.remove()); // ê¸°ì¡´ ê°’ ì œê±°

                        // í˜„ì¬ ì²´í¬ëœ ê°’ë§Œ hidden inputìœ¼ë¡œ ì¶”ê°€
                        const selected = document.querySelectorAll('.searchCheckLegion:checked');
                        selected.forEach(cb => {
                            const hidden = document.createElement("input");
                            hidden.type = "hidden";
                            hidden.name = "searchRegion";
                            hidden.value = cb.value;
                            form.appendChild(hidden);
                        });

                    }

                });
            })(i);

            // LegionCheckBox[i].addEventListener('click', function() {

            //     if(LegionCheckBox.checked) {
            //         LegionCheckBox.checked = false;
            //         this.style.borderColor = '#D0D0D0'
            //         this.style.color = '#000000'

            //     } else {
            //         LegionCheckBox.checked = true;
            //         this.style.borderColor = '#255EEE'
            //         this.style.color = '#255EEE'
            //     }

            // })
        }

        //ëŒ€ë¶„ë¥˜
        for(var i = 0; i<searchCheckTopCategoryJobType.length; i++ ) {
            (function(index) {
                searchCheckTopCategoryJobType[index].addEventListener('click', function() {

                    for(var j=0; j< searchCheckTopCategoryJobType.length; j++) {
                        searchCheckTopCategoryJobType[j].style.borderColor='#d0d0d0';
                        searchCheckTopCategoryJobType[j].style.backgroundColor='#ffffff';
                        searchCheckTopCategoryJobType[j].style.color='#000000'
                    }

                    var radioBox = searchCheckTopCategoryJobType[index].querySelector('.topCategoryCheckJobType')

                    radioBox.checked = true;


                    searchCheckTopCategoryJobType[index].style.borderColor = '#ffffff';
                    searchCheckTopCategoryJobType[index].style.backgroundColor = '#255EEE';
                    searchCheckTopCategoryJobType[index].style.color = '#ffffff';



                    searchCheckUnderCategoryJobType.style.display = 'inline-block';

                    //ëŒ€ë¶„ë¥˜ ë‚˜íƒ€ë‚´ê¸°
                    // âœ… ì—¬ê¸°ì— ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤
                    var selectedCategoryNum = radioBox.value; // ëŒ€ë¶„ë¥˜ ë²ˆí˜¸
                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', '/api/category/secondary?primary=' + selectedCategoryNum, true);

                    xhr.onreadystatechange = function() {
                        if (xhr.readyState === 4 && xhr.status === 200) { //ì„œë²„ì—ì„œ ì‘ë‹µì´ ì˜¤ë©´ í˜¸ì¶œë˜ëŠ” ì½œë°± //4ëŠ” ìš”ì²­ì™„ë£Œ 200ì€ ì‘ë‹µì„±ê³µ
                            var responseData = JSON.parse(xhr.responseText); //json ë¬¸ìì—´ ê°ì²´ ë³€í™˜

                            // ğŸ‘‰ ì—¬ê¸°ì— ì¤‘ë¶„ë¥˜ HTMLì„ ë Œë”ë§í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤
                            searchCheckUnderCategoryJobType.innerHTML = ''; // ê¸°ì¡´ ê²ƒ ì§€ìš°ê³ 

                            for (var k = 0; k < responseData.length; k++) {
                                var item = responseData[k];

                                //ë¹ˆ ì»¬ëŸ¼ì´ë©´ skip
                                if (!item.secondaryCategoryName || item.secondaryCategoryName.trim() === '') {
                                    continue;
                                }

                                var article = document.createElement('article');
                                article.innerHTML = '<input type="checkbox" name="searchJob" class="searchCheckJobType" value="' + item.secondaryCategoryNum + '">' +
                                    '<span>' + item.secondaryCategoryName + '</span>';
                                searchCheckUnderCategoryJobType.appendChild(article);
                            }
                        }
                    };
                    xhr.send();





                });

            })(i);

        }


        //ì¤‘ë¶„ë¥˜ 3ê°œê¹Œì§€

        searchCheckUnderCategoryJobType.addEventListener('click', function(e) {



            // í´ë¦­í•œ ëŒ€ìƒì´ ì²´í¬ë°•ìŠ¤ë¥¼ í¬í•¨í•˜ëŠ” divì¸ì§€ í™•ì¸
            var div = e.target.closest('article');

            // ì²´í¬ë°•ìŠ¤ê°€ ìˆëŠ” divë§Œ ì²˜ë¦¬
            // if (!fakeCheckBoxJobType) {
            //     return;
            // }

            var checkbox = div.querySelector('input[type="checkbox"]');








            // í´ë¦­í•œ ì²´í¬ë°•ìŠ¤ê°€ ì´ë¯¸ ì²´í¬ë˜ì–´ ìˆìœ¼ë©´ í•´ì œ
            if (checkbox.checked) {
                checkbox.checked = false;
                div.style.borderColor = '#D0D0D0';  // ê¸°ë³¸ ìŠ¤íƒ€ì¼ë¡œ ë³µì›
                div.style.backgroundColor = '#ffffff';
                div.style.color = '#000000';
            } else {
                var checkedCount = document.querySelectorAll('.searchCheckJobType:checked').length;
                //console.log(checkbox);

                // ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒí•˜ë„ë¡ ì œí•œ
                if (checkedCount >= 3) {
                    alert('ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!');
                    return;
                }

                checkbox.checked = true;
                div.style.borderColor = '#ffffff';  // ì„ íƒëœ ìŠ¤íƒ€ì¼ ì ìš©
                div.style.backgroundColor = '#255EEE';
                div.style.color = '#ffffff';
            }
        });

        // for (var i = 0; i< jobTypeCheckBox.length; i++) {
        //     (function(index) {
        //         fakeCheckBoxJobType[index].addEventListener('click', function() {
        //             var checkbox = fakeCheckBoxJobType[index].querySelector('.searchCheckJobType')



        // jobTypeCheckBox[i].addEventListener('click', function() {

        //     if(jobTypeCheckBox.checked) {
        //         jobTypeCheckBox.checked = false;
        //         this.style.borderColor = '#D0D0D0'
        //         this.style.color = '#000000'

        //     } else {
        //         jobTypeCheckBox.checked = true;
        //         this.style.borderColor = '#255EEE'
        //         this.style.color = '#255EEE'
        //     }

        // })







        // for(var i =0; i<LegionCheckBox.length; i++) {
        //     LegionCheckBox[i].addEventListener('change', function() {
        //         var checkedCount = document.querySelectorAll('.searchCheckLegion:checked').length;

        //         if(checkedCount > 3) {
        //             alert('ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!');
        //             this.checked = false; //ë‹¤ì‹œ ì²´í¬í•´ì œ
        //         }

        //     })
        // }

        // for(var i =0; i<jobTypeCheckBox.length; i++) {
        //     jobTypeCheckBox[i].addEventListener('change', function() {
        //         var checkedCount = document.querySelectorAll('.searchCheckJobType:checked').length;

        //         if(checkedCount > 3) {
        //             alert('ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!');
        //             this.checked = false; //ë‹¤ì‹œ ì²´í¬í•´ì œ
        //         }

        //     })
        // }




    </script>




    <div class="searchTitle">
        <h2>ê²€ìƒ‰ê²°ê³¼ ë³´ê¸°</h2>
    </div>

    <div>
        <div class="searchResults"><input type="hidden" th:value="${userId}" th:name="userId" id="userId">
            
            <div th:if="${#lists.isEmpty(list)}" style="text-align: center"><p style="font-size: 16px">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>
            <ul >
                <li th:each="vo, status:${list}"
                    th:data-url="${vo.empWantedHomepgDetail}"
                    class="clickable-li"
                    th:docuName="${vo.empRecrNm}">
                    <!-- th:onclick="|window.location.href=this.getAttribute('data-url');|"> -->
                    <p class="titleee">[[${vo.empWantedTitle}]]</p>
                    <img th:src="@{${vo.regLogImgNm}}" alt="#">
                    <p th:if="${vo.isScrapped == false}" class="heart notMine"><i class="bi bi-heart"></i></p>
                    <input type="hidden" th:value="${vo.empSeqNo}" id="empSeqNo">
                    <p th:if="${vo.isScrapped == true}" class="heart mine"><i class="bi bi-heart-fill"></i></p>
                    <div class="searchResultsInfo">
                        <!--<p><b>ì›”ê¸‰ 99999ë§Œì›</b></p>-->
                        <div class="searchResultsInfoInner">
                            <p><b>[[${vo.empBusiNm}]]</b></p>
                            <p><b>[[${vo.empRecrNm}]]</b></p>
                            <p><b>[[${vo.empWantedTypeNm}]]</b></p>
                            <p><b>[[${vo.empWantedCareerNm}]]</b></p>
                            <p><b>[[${vo.workRegionNm}]]</b></p>
                            <p><b th:text="${#temporals.createDate(vo.empWantedStdt, 'yyyyMMdd')}"></b><b>~</b><b th:text="${#temporals.createDate(vo.empWantedEndt, 'yyyyMMdd')}"></b></p>
                        </div>
                    </div>

                    <div class="searchResultsInfoMobile">
                        <div>
                            <div>
                                <img th:src="@{${vo.regLogImgNm}}" alt="#">
                            </div>
                        </div>
                        <div>
                            <p class="mobileHoverCardTitle"><b>[[${vo.empWantedTitle}]]</b></p>
                            <hr>
                            <p class="mobileHoverCardContent">[[${vo.empRecrNm}]]</p>

                            <div class="moveButtonBox">
                                <a th:href="@{${vo.empWantedHomepgDetail}}" target='_blank'>
                                    <input type="button" value="ë°”ë¡œê°€ê¸°" class="moveButton">
                                </a>
                            </div>

                        </div>
                    </div>
                </li>

            </ul>
        </div>


    </div>

    <script>

        document.addEventListener("DOMContentLoaded", function () {
            const liItems = document.querySelectorAll(".clickable-li");

            liItems.forEach(function (li) {
                li.addEventListener("click", function () {
                    // í•˜íŠ¸ë¥¼ í´ë¦­í–ˆìœ¼ë©´ ì—¬ê¸°ì„œ í´ë¦­ ì´ë²¤íŠ¸ ì¤‘ë‹¨
                    if (event.target.closest(".heart")) {
                        return;
                    }
                    if (window.innerWidth >= 768) {
                        const url = li.getAttribute("data-url");
                        if (url) {
                            window.open(url, "fullscreen=yes");
                        }
                    } else {
                        // í´ë¦­í•œ ëŒ€ìƒì´ ë‚´ë¶€ ë²„íŠ¼ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ ì²˜ë¦¬ (í•„ìš”í•˜ë©´ ì¡°ê±´ ì¶”ê°€)
                        const mobileDiv = li.querySelector(".searchResultsInfoMobile");

                        if (mobileDiv) {
                            mobileDiv.classList.toggle("proteinBar");
                            li.classList.toggle("proteinBar2");

                        }
                    }
                });

                li.addEventListener("mouseenter", function () {
                    if (window.innerWidth >= 768) {
                        const childInfo = li.querySelector(".searchResultsInfo");
                        childInfo.style.right ='-12px';
                        const grandchildInfo = childInfo.querySelectorAll('p');
                        grandchildInfo.forEach(function (p) {
                            p.style.transform= 'translateY(0px)';
                        })
                    }
                });

                li.addEventListener("mouseleave", function () {
                    if (window.innerWidth >= 768) {
                        const childInfo = li.querySelector(".searchResultsInfo");
                        childInfo.style.right ='-400px';
                        const grandchildInfo = childInfo.querySelectorAll('p');
                        grandchildInfo.forEach(function (p) {
                            p.style.transform= 'translateY(-60px)';
                        })
                    }
                });
            });
        });

        document.addEventListener("DOMContentLoaded", function () {
            var userId = document.getElementById("userId").value;
            var listContainer = document.querySelector(".searchResults ul"); // lië“¤ì´ í¬í•¨ëœ ë¶€ëª¨ ìš”ì†Œ ì„ íƒ

            listContainer.addEventListener("click", function (event) {
                const heart = event.target.closest(".heart");
                if (!heart) return; // í•˜íŠ¸ê°€ ì•„ë‹Œ ê²½ìš° ë¬´ì‹œ

                event.stopPropagation();

                const li = heart.closest("li");
                const empNoToScrap = li.querySelector("#empSeqNo").value;

                if (!userId) {
                    alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.");
                    window.location.href = "/user/login";
                    return;
                }

                const heartIcon = heart.querySelector("i");
                const isScrapped = heart.classList.contains("mine");

                const params = new URLSearchParams();
                params.append("userId", userId);
                params.append("empNoToScrap", empNoToScrap);

                if (isScrapped) {
                    // ì´ë¯¸ ì°œí•œ ìƒíƒœ â†’ ì‚­ì œ ìš”ì²­
                    fetch("unscrap", {
                        method: "POST",
                        headers: { "Content-Type": "application/x-www-form-urlencoded" },
                        body: params.toString()
                    })
                        .then(() => {
                            heart.classList.remove("mine");
                            heart.classList.add("notMine");
                            heartIcon.classList.remove("bi-heart-fill");
                            heartIcon.classList.add("bi-heart");
                        })
                        .catch(err => console.error("ì°œ ì‚­ì œ ì‹¤íŒ¨:", err));
                } else {
                    // ì•„ì§ ì°œí•˜ì§€ ì•Šì€ ìƒíƒœ â†’ ë“±ë¡ ìš”ì²­
                    fetch("scrap", {
                        method: "POST",
                        headers: { "Content-Type": "application/x-www-form-urlencoded" },
                        body: params.toString()
                    })
                        .then(() => {
                            heart.classList.remove("notMine");
                            heart.classList.add("mine");
                            heartIcon.classList.remove("bi-heart");
                            heartIcon.classList.add("bi-heart-fill");
                        })
                        .catch(err => console.error("ì°œ ë“±ë¡ ì‹¤íŒ¨:", err));
                }
            });
        });

        // var emptyHearts = document.querySelectorAll(".notMine");
        // var userId = document.getElementById("userId").value;
        // emptyHearts.forEach(function (heart) {
        //     heart.addEventListener("click", function (event) {
        //         event.stopPropagation();  // í´ë¦­ ì´ë²¤íŠ¸ì˜ ë¶€ëª¨ë¡œì˜ ì „íŒŒë¥¼ ë§‰ìŒ
        //
        //         if (userId == null || userId == "") {
        //             alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.");
        //             window.location.href = "/user/login";
        //             return;
        //         }
        //
        //         var empNoToScrap = event.target.closest("li").querySelector("#empSeqNo").value;
        //         console.log('empê°’ ì œëŒ€ë¡œ ê°€ì ¸ì™€ì§?' + empNoToScrap);
        //
        //         var params = new URLSearchParams();
        //         params.append('userId', userId);
        //         params.append('empNoToScrap', empNoToScrap);
        //
        //         fetch('scrap', {
        //             method: 'POST',
        //             headers: {
        //                 'Content-Type': 'application/x-www-form-urlencoded'
        //             },
        //             body: params.toString()
        //         })
        //             .then(() => {
        //                 // ì°œ ì„±ê³µ ì‹œ, í•˜íŠ¸ ì•„ì´ì½˜ ìƒíƒœ ë³€ê²½ (ë¹ˆ í•˜íŠ¸ -> ì±„ì›Œì§„ í•˜íŠ¸)
        //                 heart.querySelector("i").classList.remove("bi-heart");
        //                 heart.querySelector("i").classList.add("bi-heart-fill");
        //                 heart.classList.remove("notMine");
        //                 heart.classList.add("mine");
        //             })
        //             .catch(error => console.log('ì—ëŸ¬:', error));
        //     });
        // });
        //
        // var fullHearts = document.querySelectorAll(".mine");
        // fullHearts.forEach(function (heart) {
        //     heart.addEventListener("click", function (event) {
        //         event.stopPropagation();
        //
        //         var empNoToScrap = event.target.closest("li").querySelector("#empSeqNo").value;
        //         console.log('empê°’ ì œëŒ€ë¡œ ê°€ì ¸ì™€ì§? ì´ë²ˆì—” ì°œì‚­ì œì„' + empNoToScrap);
        //
        //         var params = new URLSearchParams();
        //         params.append('userId', userId);
        //         params.append('empNoToScrap', empNoToScrap);
        //
        //         fetch('unscrap', {
        //             method: 'POST',
        //             headers: {
        //                 'Content-Type': 'application/x-www-form-urlencoded'
        //             },
        //             body: params.toString()
        //         })
        //             .then(() => {
        //                 // ì°œ ì‚­ì œ ì„±ê³µ ì‹œ, í•˜íŠ¸ ì•„ì´ì½˜ ìƒíƒœ ë³€ê²½ (ì±„ì›Œì§„ í•˜íŠ¸ -> ë¹ˆ í•˜íŠ¸)
        //                 heart.querySelector("i").classList.remove("bi-heart-fill");
        //                 heart.querySelector("i").classList.add("bi-heart");
        //                 heart.classList.remove("mine");
        //                 heart.classList.add("notMine");
        //             })
        //             .catch(error => console.log('ì—ëŸ¬:', error));
        //     });
        // })

        //     document.querySelectorAll('.searchResults li').forEach(li => {
        //     li.addEventListener('mouseenter', function () {
        //         const info = document.querySelector('.searchResultsInfoMobile');
        //         const rect = li.getBoundingClientRect(); // liì˜ ë¸Œë¼ìš°ì € ë‚´ ìœ„ì¹˜

        //         // ìœ„ì¹˜ì™€ í¬ê¸° ì„¤ì •
        //         info.style.position = 'fixed';
        //         info.style.top = `${rect.top}px`;
        //         info.style.left = `${rect.left}px`;
        //         info.style.width = `${rect.width}px`;
        //         info.style.height = `${rect.height}px`; // ì›ë˜ í¬ê¸°ë¶€í„° ì‹œì‘, ì•„ë˜ì„œ scaleë¡œ í™•ì¥
        //         info.style.transform = 'scale(0)';
        //         info.style.transformOrigin = 'top left'; // ì™¼ìª½ ìœ„ ê¸°ì¤€ìœ¼ë¡œ ì»¤ì§€ê²Œ
        //         info.style.zIndex = '999';

        //         // ì•½ê°„ì˜ delayë¡œ ì• ë‹ˆë©”ì´ì…˜ ìì—°ìŠ¤ëŸ½ê²Œ
        //         setTimeout(() => {
        //             info.style.transform = 'scale(1)';
        //         }, 10); // ì‘ì€ ë”œë ˆì´ê°€ transition íŠ¸ë¦¬ê±°ë¨
        //     });

        //     li.addEventListener('mouseleave', function () {
        //         const info = document.querySelector('.searchResultsInfoMobile');
        //         info.style.transform = 'scale(0)';

        //         // ì• ë‹ˆë©”ì´ì…˜ ëë‚œ í›„ ìœ„ì¹˜ ì œê±°
        //         setTimeout(() => {
        //             info.style.zIndex = '-1';
        //         }, 300); // CSS transitionê³¼ ë™ì¼í•˜ê²Œ ë§ì¶”ê¸°
        //     });
        // });




    </script>








    <div class="bottomPageChangeButtonBox">

        <div class="pageChange">
            <!--                <span class="pageChangeLeftArrow"></span>-->
            <ul>
                <li class="pageChangeLeftArrow" th:if="${pageVO.realEnd} != 0">
                    <a th:href="@{jobposting(page=1,
                          amount=${pageVO.amount},
                          searchRegion=${pageVO.cri.searchRegion},
                          searchJob=${pageVO.cri.searchJob})}">
                    <i class="bi bi-chevron-double-left"></i>
                </a></li>
                <th:block th:if="${pageVO.prev}">
                    <li style="margin-right:5px;">
                        <a th:href="@{jobposting(page=${(pageVO.start)-1},
                                            amount=${pageVO.amount},
                                            searchRegion=${pageVO.cri.searchRegion},
                                            searchJob=${pageVO.cri.searchJob})}">
                            <i class="bi bi-chevron-left" aria-hidden="true"></i>
                        </a>
                    </li>
                </th:block>

                <th:block th:each="page:${pageVO.pageList}">
                    <li th:class="${pageVO.page == page? 'currentPage':''}">
                        <a th:href="@{jobposting(page=${page},
                                            amount=${pageVO.amount},
                                            searchRegion=${pageVO.cri.searchRegion},
                                            searchJob=${pageVO.cri.searchJob})}">[[${page}]]
                        </a>
                    </li>
                </th:block>

                <th:block th:if="${pageVO.next}">
                    <li style="margin-left:5px;">
                        <a th:href="@{jobposting(page=${pageVO.end+1},
                                           amount=${pageVO.amount},
                                           searchRegion=${pageVO.cri.searchRegion},
                                                searchJob=${pageVO.cri.searchJob})}">
                            <i class="bi bi-chevron-right" aria-hidden="true"></i>
                        </a>
                    </li>
                </th:block>
                <li class="pageChangeRightArrow" th:if="${pageVO.realEnd} != 0">
                    <a th:href="@{jobposting(page=${pageVO.realEnd},
                         amount=${pageVO.amount},
                         searchRegion=${pageVO.cri.searchRegion},
                         searchJob=${pageVO.cri.searchJob})}">
                    <i class="bi bi-chevron-double-right" aria-hidden="true">
                    </i></a></li>
            </ul>
        </div>
    </div>




</div>

<script src="/css/js/header.js"></script>

<div th:replace="include/footer :: footerFragment"></div>

</body>
</html>